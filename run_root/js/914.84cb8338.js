(self["webpackChunkvue_antd_pro"]=self["webpackChunkvue_antd_pro"]||[]).push([[914],{75792:function(e,t,n){"use strict";n.d(t,{A:function(){return b}});var s=function(){var e=this,t=e._self._c;return t("a-modal",{ref:"headerUploadRef",staticClass:"draggable-modal",attrs:{title:"接收列表",width:"100%","wrap-class-name":"full-modal",visible:e.visible,confirmLoading:e.loading},on:{cancel:function(){e.$emit("cancel")}}},[t("a-card",{attrs:{bordered:!1}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:48}},[t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"状态"}},[t("a-select",{attrs:{placeholder:"请选择","default-value":"-1"},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}},[t("a-select-option",{attrs:{value:"-1"}},[e._v("全部")]),t("a-select-option",{attrs:{value:"0"}},[e._v("未发送")]),t("a-select-option",{attrs:{value:"1"}},[e._v("已发送")])],1)],1)],1),t("a-col",{attrs:{md:e.advanced?24:8,sm:24}},[t("span",{staticClass:"table-page-search-submitButtons",style:e.advanced&&{float:"right",overflow:"hidden"}||{}},[t("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),t("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return e.queryParam={}}}},[e._v("重置")])],1)])],1)],1)],1),t("div",{staticClass:"table-operator"}),t("s-table",{ref:"table",attrs:{size:"default",rowKey:"key",columns:e.columns,data:e.loadData,alert:!0,rowSelection:e.rowSelection,showPagination:"auto"},scopedSlots:e._u([{key:"serial",fn:function(n,s,a){return t("span",{},[e._v(" "+e._s(a+1)+" ")])}},{key:"created_at",fn:function(n){return t("span",{},[e._v(" "+e._s(e._f("timestampToString")(n))+" ")])}},{key:"statusBox",fn:function(n){return t("span",{},[t("a-badge",{attrs:{status:e._f("statusTypeFilter")(n),text:e._f("statusFilter")(n)}})],1)}},{key:"description",fn:function(n){return t("span",{},[t("ellipsis",{attrs:{length:4,tooltip:""}},[e._v(e._s(n))])],1)}}])})],1)],1)},a=[],r=n(76338),o=(n(2892),n(26099),n(74543)),i=n(3628),l=n(75314),u=n(36432),c=n.n(u),d=n(95353),f=[{title:"id",dataIndex:"id"},{title:"接收者账号",dataIndex:"receive"},{title:"邮件服务器",dataIndex:"send_server_text"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"statusBox"}},{title:"操作",dataIndex:"action",width:"250px",scopedSlots:{customRender:"action"}}],m={0:{status:"default",text:"未发送"},1:{status:"default",text:"已发送"}},h={name:"SendList",components:{STable:o.Wd,VueDraggableResizable:c()},props:{sendID:{type:Number,required:!0},selectSendInfo:{type:Object,required:!0},visible:{type:Boolean,required:!0},loading:{type:Boolean,default:function(){return!1}},model:{type:Object,default:function(){return null}}},watch:{nowSendInfo:{handler:function(e,t){this.selectSendInfo=e,this.$refs.table.refresh(!0)},deep:!0},sendID:{handler:function(e,t){0!==e&&this.reloadList()},deep:!0}},data:function(){var e=this;return this.columns=f,{confirmLoading:!1,mdl:null,advanced:!1,queryParam:{keyWords:"",status:"-1"},loadData:function(t){if(void 0!==e.selectSendInfo&&""!==e.selectSendInfo.token&&0!==e.selectSendInfo.id&&void 0!==e.selectSendInfo.id){var n=Object.assign({},t,e.queryParam);n.send_id=e.sendID;var s=(0,i.c1)(e.selectSendInfo);return(0,i.XK)(s,n).then((function(e){return 200===e.status?null!==e.result.data?e.result:Promise.resolve({data:[],total:0}):(e.status,Promise.resolve({data:[],total:0}))}))}return Promise.resolve({data:[],total:0})},selectedRowKeys:[],selectedRows:[]}},filters:{statusFilter:function(e){if(void 0===e||null===e||""===e)return m["0"].text;var t=String(e);return m[t].text},statusTypeFilter:function(e){if(void 0===e||null===e||""===e)return m["0"].status;var t=String(e);return m[t].status}},created:function(){},computed:(0,r.A)((0,r.A)({},(0,d.aH)({nowSendInfo:function(e){return e.app.nowSendInfo}})),{},{rowSelection:function(){return{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange}}}),methods:{reloadList:function(){this.queryParam.status="-1",this.$refs.table.refresh(!0)},sendInfoAction:function(e,t){var n=this,s=e.id,a=Number(t);if(void 0!==this.selectSendInfo&&""!==this.selectSendInfo.token&&0!==this.selectSendInfo.id){var r=(0,i.c1)(this.selectSendInfo);(0,i.fi)(r,{send_id:s,status:a}).then((function(e){200===e.status?n.$message.success(e.message):n.$message.error(e.message)}))}},updateMenu:function(){this.$store.commit(l.tX)},handleOnline:function(e,t){var n=this;(0,i.Pg)(e,t).then((function(e){200===e.status?(n.$refs.table.refresh(),n.updateMenu(),n.$message.success(e.message)):n.$message.error(e.message)}))},handleAdd:function(){this.mdl=null,this.visible=!0},handleEdit:function(e){this.visible=!0,this.mdl=(0,r.A)({},e)},handleDelete:function(e){var t=this;(0,i.hp)(e).then((function(e){200===e.status?(t.$refs.table.refresh(),t.$message.success(e.message)):t.$message.error(e.message)}))},handleOk:function(){var e=this,t=this.$refs.createModal.form;this.confirmLoading=!0;var n=this.$refs.createModal.saveData;t.validateFields((function(s,a){if(s)e.confirmLoading=!1;else if(n.id>0){var r=e.$refs.createModal.getFormData("update");if(void 0!==e.selectSendInfo&&""!==e.selectSendInfo.token&&0!==e.selectSendInfo.id&&void 0!==e.selectSendInfo.id){var o=(0,i.c1)(e.selectSendInfo);(0,i.It)(o,r).then((function(n){200===n.status?(e.visible=!1,e.confirmLoading=!1,t.resetFields(),e.$refs.table.refresh(),e.$message.success(n.message)):(e.confirmLoading=!1,e.$message.error(n.message))}))}}else{var l=e.$refs.createModal.getFormData("add");if(void 0!==e.selectSendInfo&&""!==e.selectSendInfo.token&&0!==e.selectSendInfo.id&&void 0!==e.selectSendInfo.id){var u=(0,i.c1)(e.selectSendInfo);(0,i.UF)(u,l).then((function(n){200===n.status?(e.visible=!1,e.confirmLoading=!1,t.resetFields(),e.$refs.table.refresh(),e.$message.success(n.message)):(e.confirmLoading=!1,e.$message.error(n.message))}))}}}))},handleCancel:function(){this.visible=!1;var e=this.$refs.createModal.form;e.resetFields()},handleSub:function(e){0!==e.status?this.$message.info("".concat(e.no," 订阅成功")):this.$message.error("".concat(e.no," 订阅失败，规则已关闭"))},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={keywords:""}}}},g=h,v=n(81656),p=(0,v.A)(g,s,a,!1,null,"7c5ffd4e",null),b=p.exports},69699:function(e,t,n){"use strict";n.d(t,{A:function(){return c}});var s=function(){var e=this,t=e._self._c;return t("a-modal",{ref:"headerUploadRef",staticClass:"draggable-modal",attrs:{title:"设置smtp",width:"100%","wrap-class-name":"full-modal",visible:e.visible,confirmLoading:e.loading},on:{ok:function(){e.$emit("ok")},cancel:function(){e.$emit("cancel")}}},[t("a-spin",{attrs:{spinning:e.loading}},[t("a-form",e._b({attrs:{form:e.form}},"a-form",e.formLayout,!1)),t("a-list",{attrs:{"item-layout":"horizontal","data-source":e.logItems},scopedSlots:e._u([{key:"renderItem",fn:function(n){return t("a-list-item",{},[t("a-list-item-meta",[t("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(n.message))])])],1)}}])})],1)],1)},a=[],r=n(3628),o={components:{},watch:{},methods:{ReloadStart:function(e){var t=this;if(this.logItems=[],void 0!==this.selectSendInfo&&""!==this.selectSendInfo.token&&0!==this.selectSendInfo.id){var n=(0,r.c1)(this.selectSendInfo);(0,r.RU)(n,e).then((function(n){if(200===n.status)if(null!==n.result)if(""===e)t.ReloadStart(n.result);else{for(var s=0;s<n.result.length;s++)t.logItems.push({message:n.result[s].message});setTimeout((function(){t.ReloadStart(e)}),1e3)}else t.logItems.push({message:"已结束"});else 401===n.status?t.logItems.push({message:n.message}):t.logItems.push({message:"已结束"})}))}else this.logItems.push({message:"错误"})}},props:{selectSendInfo:{type:Object,required:!0},visible:{type:Boolean,required:!0},loading:{type:Boolean,default:function(){return!1}},model:{type:Object,default:function(){return null}}},data:function(){return{logItems:[]}}},i=o,l=n(81656),u=(0,l.A)(i,s,a,!1,null,null,null),c=u.exports},91863:function(e,t,n){var s=1/0,a=9007199254740991,r="[object Arguments]",o="[object Function]",i="[object GeneratorFunction]",l="[object Symbol]",u="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,c="object"==typeof self&&self&&self.Object===Object&&self,d=u||c||Function("return this")();function f(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function m(e,t){var n=-1,s=e?e.length:0,a=Array(s);while(++n<s)a[n]=t(e[n],n,e);return a}function h(e,t){var n=-1,s=t.length,a=e.length;while(++n<s)e[a+n]=t[n];return e}var g=Object.prototype,v=g.hasOwnProperty,p=g.toString,b=d.Symbol,y=g.propertyIsEnumerable,S=b?b.isConcatSpreadable:void 0,I=Math.max;function w(e,t,n,s,a){var r=-1,o=e.length;n||(n=x),a||(a=[]);while(++r<o){var i=e[r];t>0&&n(i)?t>1?w(i,t-1,n,s,a):h(a,i):s||(a[a.length]=i)}return a}function _(e,t){return e=Object(e),$(e,t,(function(t,n){return n in e}))}function $(e,t,n){var s=-1,a=t.length,r={};while(++s<a){var o=t[s],i=e[o];n(i,o)&&(r[o]=i)}return r}function k(e,t){return t=I(void 0===t?e.length-1:t,0),function(){var n=arguments,s=-1,a=I(n.length-t,0),r=Array(a);while(++s<a)r[s]=n[t+s];s=-1;var o=Array(t+1);while(++s<t)o[s]=n[s];return o[t]=r,f(e,this,o)}}function x(e){return F(e)||A(e)||!!(S&&e&&e[S])}function j(e){if("string"==typeof e||D(e))return e;var t=e+"";return"0"==t&&1/e==-s?"-0":t}function A(e){return O(e)&&v.call(e,"callee")&&(!y.call(e,"callee")||p.call(e)==r)}var F=Array.isArray;function R(e){return null!=e&&q(e.length)&&!P(e)}function O(e){return C(e)&&R(e)}function P(e){var t=L(e)?p.call(e):"";return t==o||t==i}function q(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function L(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function C(e){return!!e&&"object"==typeof e}function D(e){return"symbol"==typeof e||C(e)&&p.call(e)==l}var M=k((function(e,t){return null==e?{}:_(e,m(w(t,1),j))}));e.exports=M}}]);